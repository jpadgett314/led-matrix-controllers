<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Sparkle HID Demo</title>
    <script type="importmap">
        {
            "imports": {
                "led-matrix-controllers": "https://esm.sh/led-matrix-controllers@latest"
            }
        }
    </script>
</head>
<body>
    <h1>Sparkle HID Demo</h1>
    <button id="connect-button">Connect</button>
    <button id="info-button">Info</button>
    <button id="draw-button">Draw</button>
    <script type="module">
        import { SparkleController, WIDTH, HEIGHT } from 'led-matrix-controllers';
        
        let controller = new SparkleController();

        document.getElementById('connect-button').onclick = async () => {
            await controller.connect();
            console.log('SparkleController connected');
        };

        document.getElementById('info-button').onclick = async () => {
            const info = await controller.info();
            console.log(info);
        };

        document.getElementById('draw-button').onclick = async () => {
            await controller.draw(
                Array.from({ length: HEIGHT }, (_, i) => 
                    Array.from({ length: WIDTH }, (_, j) => 
                        ((i + j) % 16) / 16
                    )
                )
            );
        };
    </script>
</body>
</html>